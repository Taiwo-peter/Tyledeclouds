# Use Alpine as the base image
FROM alpine:3.18

# Install MariaDB (MySQL replacement) and bash
RUN apk --no-cache add mariadb mariadb-client bash

# Set up MySQL data directory
RUN mkdir -p /var/lib/mysql && chown -R mysql:mysql /var/lib/mysql

# Copy entrypoint script
COPY entrypoint.sh /usr/local/bin/
RUN chmod +x /usr/local/bin/entrypoint.sh

# Expose MySQL port
EXPOSE 3306

# Set entrypoint
ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]
